# DX4MGR Ver4: 外部設定・複数シナリオ対応モデル

Ver4では、シミュレーションの運用性を大幅に向上させ、実務での「ケーススタディ」を容易にするための機能拡充を行いました。

## 1. Ver4の主要な進化点

1.  **外部データシート対応**: `scenarios.csv` を編集するだけで、プログラムを書き換えることなくシミュレーション条件を変更・追加できるようになりました。
2.  **複数シナリオ一括比較**: 複数の改善案（スキル向上、依存削減、リソース増など）を一度にシミュレーションし、同一グラフ上で比較可能です。
3.  **日本語ドキュメントの完備**: 
    - `GUIDE_v4_JP.md`: 内部ロジック（待ち行列理論、組織モデル）の解説。
    - `PARAMETER_GUIDE_v4_JP.md`: 各設定項目の意味と現実的な算出方法のガイド。
4.  **豊富なテストパターン**: 標準的なケースから、高負荷、品質課題、組織課題など、R&D現場で起こりうる7つのシナリオをプリセット。

## 2. 構成ファイル

- `simulator_v4.py`: 離散イベントシミュレーション・エンジン。
- `visualizer_v4.py`: グラフ生成モジュール（比較機能強化）。
- `run_v4.py`: CSV読み込み、全シナリオ実行、比較図生成を行うメインスクリプト。
- `scenarios.csv`: シミュレーション条件を定義するデータシート。
- `GUIDE_v4_JP.md`: 内部構造解説。
- `PARAMETER_GUIDE_v4_JP.md`: パラメータ設定ガイド。

## 3. 使用方法

1.  **シナリオの編集**: `scenarios.csv` をExcelやテキストエディタで開き、検証したい条件を入力します。
2.  **実行**:
    ```bash
    python3 2026/RDIssues/Ver4/run_v4.py
    ```
3.  **結果の確認**: `2026/RDIssues/Ver4/output/` に以下の画像が生成されます。
    - `compare_violin.png`: 全シナリオの待ち時間分布（P90/P95比較）。
    - `compare_ccdf.png`: 納期超過確率（生存曲線）の比較。
    - `compare_wip.png`: 滞留数の推移比較。
    - `compare_dashboard.png`: 上層部向け意思決定サマリ。
    - `waterfall_[ScenarioName].png`: 各シナリオごとの能力内訳。

## 4. 改善案の検討フロー

本ツールを用いる際は、以下のステップを推奨します。

1.  **Baseline（現状）の作成**: 現在の組織の状態を `scenarios.csv` に再現します。
2.  **課題シナリオの追加**: 「もし案件が20%増えたら（High_Load）」「もし再作業が倍増したら」などのリスクを可視化します。
3.  **改善シナリオの検証**: 「スキル向上（Skill_Up）」と「依存削減（Dependency_Reduction）」のどちらが効果的か、データを元に議論します。
