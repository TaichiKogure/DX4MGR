# DX4MGR Ver10x シナリオパラメータ解説ガイド

DX4MGR Ver10x (並列実験プラットフォームモデル) で使用される各パラメータの意味、システム上の挙動、および設定の際のヒントを解説します。

---

## 1. 基本設定 (Simulation Base)

- **scenario_name**: シナリオの識別名。
- **n_trials**: モンテカルロ・シミュレーションの試行回数。
  - 推奨: 20〜100回。統計的な有意差を確認したい場合は 100回以上を推奨。
- **days**: シミュレーションを実行する期間（日）。
  - 通常は 365 (1年) を設定します。

- **sampling_interval**: シミュレーション中に WIP（仕掛り案件数）を記録する時間間隔。
  - 1.0 の場合、毎日 WIP の状態がスナップショットとして保存され、`wip_time_series.png` などの時系列グラフに反映されます。

---

## 2. 案件投入と初期工程 (Flow & Entry)

- **arrival_rate**: 1日あたりの平均案件投入数。
  - 0.5 の場合、平均して 2日に 1件のペースで新しい案件が「小実験」工程に投入されます。
  - **感度**: この値を上げすぎると、システム全体が飽和し、WIP（滞留）が爆発的に増加します。
- **small_exp_duration**: 「小実験」工程にかかる平均日数。
  - 指数分布に従ってサンプリングされます。
  - 初期工程であり、通常は短い期間（例: 5日間）を設定します。
- **proto_duration**: 「試作・テスト」工程にかかる平均日数。
  - 試作ラインはリソースが有限（デフォルト 5並列）であるため、期間が長いとここで待ち時間が発生します。

---

## 3. バンドリングと審査周期 (Batching & Gate)

- **bundle_size**: DR（デザインレビュー）にかける案件のまとめ単位。
  - 3 の場合、3つの案件が揃うまで DR 待ちとなります。
  - **ヒント**: 大きくすると 1回あたりの DR 効率は上がりますが、個々の案件の待ち時間は増加します。
- **dr_period**: DR（審査）が開催される周期（日）。
  - 90 の場合、四半期に一度のペースで DR が開催されます。
  - **重要**: Ver10x において最も感度が高いパラメータの一つです。短縮（例: 30日、15日）することでリードタイムが劇的に改善します。
- **decision_latency_days**: DR 終了後から正式な意思決定が下るまでのタイムラグ。
  - 実務上の「持ち帰り検討」や「決裁待ち」を表現します。

---

## 4. リソースと品質 (Resources & Quality)

要員構成を以下の 3つの役割の人数で指定します。それぞれ能力と品質が異なります。

- **n_senior**: シニア層（熟練者）の人数。
  - 能力: 高 (10), 品質: 高 (0.95)
- **n_coordinator**: コーディネーター層の人数。
  - 能力: 中 (5), 品質: 中 (0.8)
- **n_new**: 新人・若手層の人数。
  - 能力: 低 (2), 品質: 低 (0.6)

※ **dr_capacity / dr_quality**: これらは以前のバージョンとの互換性のために残っていますが、Ver10x では上記の要員構成から自動計算されるため、通常は個別に設定する必要はありません。

---

## 5. 手戻りと複雑性 (Rework & Complexity)

DR で否認された際、案件は「小実験」工程に差し戻されます。この際、Ver10x では単なるやり直しではなく、**「タスクの増殖」**として負荷を表現します。

- **rework_load_factor**: 差し戻し時の「増殖率」の係数。
  - 1.0 の場合、サンプリングされた重みに応じた数の新しいタスクが生成されます。
  - 2.0 にすると、修正のために最初の倍以上のタスク（追加実験など）が必要になる「泥沼化」を表現できます。
- **max_rework_cycles**: 最大差し戻し回数。
  - これを超えると、それ以上のタスク増殖は止まります（打ち切り）。
- **decay**: 差し戻しを繰り返す際の減衰率。
  - 0.7 の場合、2回目、3回目の差し戻しでは、発生する追加負荷（重み）が徐々に小さくなることを表現します。
- **rework_beta_a / rework_beta_b**: 差し戻し時の負荷（重み）を決定するベータ分布の形状パラメータ。
  - (2, 5) は「多くの場合、軽微な修正だが、稀に大きな修正が必要」という実態を表現します。
- **conditional_prob_ratio**: 条件付き合格の比率。
  - 全てが「完全合格」か「完全否認」ではなく、一部が修正を条件に次へ進む挙動に影響します。

---

## 分析のヒント

1. **ボトルネックの特定**: `gate_wait_heatmap.png` を見て、どの工程で待ち時間が長いかを確認してください。`DR_GATE` での待ちが長い場合は `dr_period` の短縮や `bundle_size` の見直しが有効です。
2. **リソース最適化**: 全員シニアにするよりも、適切な数のコーディネーターを配置した方が、コストパフォーマンス（スループット/人数）が良い場合があります。
3. **レジリエンスの検証**: `rework_load_factor` を上げた際の性能劣化が激しいシナリオは、手戻りに弱い（レジリエンスが低い）プロセスと言えます。
