### R&D Flow 健全性診断モデル (Ver1) マニュアル

本プログラムは、研究開発（R&D）組織における仕事の流れ（フロー）をシミュレーションし、どのような要因が開発速度（スループット）や待ち時間に影響を与えるかを検証するためのツールです。

---

### 1. プログラムの構成（3つのモデル）

このシミュレーションは、以下の3つの理論を組み合わせて構築されています。

1.  **待ち行列モデル（承認ゲート＝サーバ）**
    *   承認者を「窓口」、成果物を「並んでいる客」と見なします。
    *   承認者が忙しくなり、稼働率が100%に近づくと、待ち時間は指数関数的に増大します。
2.  **再作業ループ（差し戻し）**
    *   承認で「ダメ出し（差し戻し）」が発生すると、再度作業が必要になり、承認待ちの列に並び直すことになります。
    *   これにより、実質的な仕事量が増え、全体のスピードが落ちます。
3.  **調整コスト（組織の依存関係）**
    *   チーム間の調整や会議、依存関係が増えると、本来の作業に使える時間が削られます。
    *   組織が大きくなるほど、この「目に見えない摩擦」が効いてきます。

---

### 2. 実行方法

Pythonがインストールされている環境で、以下のコマンドを実行してください。

```bash
python3 verify_model.py
```

実行すると、4つの異なるシナリオ（ケース）でのシミュレーション結果が表示されます。

---

### 3. 各ステップの説明（初心者向け）

プログラム内部では以下のステップで計算を行っています。

*   **ステップ1: 調整コストの計算**
    「依存関係の強さ」と「調整の負担（ペナルティ）」を掛け合わせ、チームが本来持っている能力がどれくらい削られるかを算出します。
*   **ステップ2: 仕事の到着（VPの発生）**
    「価値ポイント(VP)」という単位で、開発チームから承認依頼がランダムに発生します。
*   **ステップ3: 承認待ちと処理**
    空いている承認者がいれば処理を開始し、いなければ列に並んで待ちます。
*   **ステップ4: 差し戻しの判定**
    一定の確率で承認されず、最初からやり直し（再作業）になります。この時、再度承認待ちの列に並びます。

---

### 4. パラメータの変更方法

`verify_model.py` 内の `simulate_flow_model` 関数の引数を変えることで、様々な状況をテストできます。

*   `arrival_vp_per_day`: 1日あたりに発生する仕事量（VP）
*   `approvers`: 承認者の人数
*   `service_vp_per_day`: 1人の承認者が1日に処理できる仕事量（VP）
*   `p_rework`: 差し戻しが発生する確率（0.1 = 10%）
*   `dependency_level`: 組織間の依存関係の強さ（0.0 〜 1.0）

---

### 5. 考察ポイント（マネジメントへの示唆）

シミュレーション結果から、以下のポイントを観察してみてください。

1.  **「稼働率100%」の罠**
    *   ケース2のように、仕事量が承認能力に近づくと、スループットは微増するだけなのに、**待ち時間は急激に増大**します。「常に忙しい」状態は、リードタイムを破壊します。
2.  **「差し戻し」の破壊力**
    *   ケース3のように、再作業率が上がると、承認待ちの列が二重三重に膨れ上がります。「手戻りを減らすための事前のすり合わせ（Definition of Ready）」が、結果的にスピードを上げる近道であることがわかります。
3.  **「組織の壁」による減速**
    *   ケース4のように、依存関係が増えると、個人の能力（キャパシティ）が変わらなくても、組織全体のアウトプットは激減します。チームの独立性を高めることの重要性が数値で示されます。
4.  **改善の優先順位**
    *   「承認者を増やす」のが早いか、「差し戻しを減らす」のが早いか、「仕事の粒度（VP）を小さくする」のが早いか。このモデルを使って、最も効果的な打ち手（ボトルネックの解消）を議論できます。
